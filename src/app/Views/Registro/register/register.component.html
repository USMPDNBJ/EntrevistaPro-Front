<div class="form-container">
  <svg style="display: none;">
    <symbol id="icon-user" viewBox="0 0 24 24">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </symbol>
    <symbol id="icon-family" viewBox="0 0 24 24">
      <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
      <polyline points="10 17 15 12 10 7"></polyline>
    </symbol>
    <symbol id="icon-email" viewBox="0 0 24 24">
      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
      <polyline points="22,6 12,13 2,6"></polyline>
    </symbol>
    <symbol id="icon-password" viewBox="0 0 24 24">
      <path d="M12 2a3 3 0 0 0-3 3v4H6v10h12V9h-3V5a3 3 0 0 0-3-3z"></path>
    </symbol>
    <symbol id="icon-dni" viewBox="0 0 24 24">
      <rect x="3" y="4" width="18" height="14" rx="2" ry="2"></rect>
      <line x1="16" y1="10" x2="16" y2="10"></line>
    </symbol>
    <symbol id="icon-phone" viewBox="0 0 24 24">
      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
    </symbol>
    <symbol id="icon-skills" viewBox="0 0 24 24">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
      <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </symbol>
    <symbol id="icon-arrow" viewBox="0 0 24 24">
      <path d="M5 12h14"></path>
      <polyline points="12 5 19 12 12 19"></polyline>
    </symbol>
    <symbol id="icon-comment" viewBox="0 0 24 24">
      <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l2.2-6.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
    </symbol>
  </svg>
  <div class="register-form">
    <div class="form-header">
      <img src="img/logo.jpg" class="logo-card" alt="Logo de EntrevistaPro">
      <h2>Únete a EntrevistaPro</h2>
      <p>Prepárate para brillar en tus entrevistas</p>
    </div>

    <form [formGroup]="userGroup" class="form-content" role="form" aria-labelledby="form-header">
      <div class="input-row">
        <div class="input-field">
          <label for="nombres" id="nombres-label">
            <svg class="input-icon"><use href="#icon-user"></use></svg>
            Nombres
          </label>
          <input type="text" id="nombres" formControlName="nombres" placeholder="Ingresa tus nombres" required aria-labelledby="nombres-label" aria-describedby="nombres-error">
          <span class="error-message" id="nombres-error" *ngIf="userGroup.get('nombres')?.invalid && userGroup.get('nombres')?.touched">
            Por favor, ingresa un nombre válido (mínimo 2 caracteres)
          </span>
        </div>
        <div class="input-field">
          <label for="apellidos" id="apellidos-label">
            <svg class="input-icon"><use href="#icon-family"></use></svg>
            Apellidos
          </label>
          <input type="text" id="apellidos" formControlName="apellidos" placeholder="Ingresa tus apellidos" required aria-labelledby="apellidos-label" aria-describedby="apellidos-error">
          <span class="error-message" id="apellidos-error" *ngIf="userGroup.get('apellidos')?.invalid && userGroup.get('apellidos')?.touched">
            Por favor, ingresa un apellido válido (mínimo 2 caracteres)
          </span>
        </div>
      </div>

      <div class="input-row">
        <div class="input-field">
          <label for="correo" id="correo-label">
            <svg class="input-icon"><use href="#icon-email"></use></svg>
            Correo Electrónico
          </label>
          <input type="email" id="correo" formControlName="correo" placeholder="tu@correo.com" required aria-labelledby="correo-label" aria-describedby="correo-error">
          <span class="error-message" id="correo-error" *ngIf="userGroup.get('correo')?.invalid && userGroup.get('correo')?.touched">
            Por favor, ingresa un correo válido
          </span>
        </div>
        <div class="input-field">
          <label for="contrasena" id="contrasena-label">
            <svg class="input-icon"><use href="#icon-password"></use></svg>
            Contraseña
          </label>
          <input type="password" id="contrasena" formControlName="contrasena" placeholder="Crea una contraseña" required aria-labelledby="contrasena-label" aria-describedby="contrasena-error">
          <span class="error-message" id="contrasena-error" *ngIf="userGroup.get('contrasena')?.invalid && userGroup.get('contrasena')?.touched">
            La contraseña debe tener al menos 6 caracteres
          </span>
        </div>
      </div>

      <div class="input-row">
        <div class="input-field">
          <label for="dni" id="dni-label">
            <svg class="input-icon"><use href="#icon-dni"></use></svg>
            DNI
          </label>
          <input type="text" id="dni" formControlName="dni" placeholder="Ingresa tu DNI" required aria-labelledby="dni-label" aria-describedby="dni-error">
          <span class="error-message" id="dni-error" *ngIf="userGroup.get('dni')?.invalid && userGroup.get('dni')?.touched">
            El DNI debe tener 8 dígitos
          </span>
        </div>
        <div class="input-field">
          <label for="celular" id="celular-label">
            <svg class="input-icon"><use href="#icon-phone"></use></svg>
            Celular
          </label>
          <input type="tel" id="celular" formControlName="celular" placeholder="Ingresa tu número" required aria-labelledby="celular-label" aria-describedby="celular-error">
          <span class="error-message" id="celular-error" *ngIf="userGroup.get('celular')?.invalid && userGroup.get('celular')?.touched">
            El celular debe tener 9 dígitos
          </span>
        </div>
      </div>

      <div class="skills-section">
        <h3>
          <svg class="section-icon"><use href="#icon-skills"></use></svg>
          Selecciona 3 categorías de tu interés
        </h3>
        <div class="skills-grid">
          <span class="skill-chip" *ngFor="let skill of ['Diseño', 'Habilidades Blandas', 'Idiomas', 'Modelado Técnico', 'Ofimática', 'Programación']"
                (click)="toggleSkill(skill)" [ngClass]="{'selected': selectedSkills.includes(skill)}" tabindex="0">
            {{skill}}
          </span>
        </div>
        <p class="skills-note" *ngIf="selectedSkills.length >= 3">Máximo de 3 categorías</p>
        <p class="error-message" *ngIf="selectedSkills.length === 0 && userGroup.touched">Debes seleccionar al menos una categoría</p>
      </div>

      <div class="comments-section">
        <h3>
          <svg class="section-icon"><use href="#icon-comment"></use></svg>
          Comentarios (Opcional)
        </h3>
        <div class="input-field full-width">
          <label for="comentarios" id="comentarios-label">Agrega un comentario</label>
          <textarea id="comentarios" formControlName="comentarios" placeholder="Escribe cualquier comentario o nota adicional" aria-labelledby="comentarios-label"></textarea>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" (click)="onSubmit()" class="action-btn" [ngClass]="{ loading: isLoading }" [disabled]="userGroup.invalid || selectedSkills.length === 0 || isLoading">
          <span *ngIf="!isLoading">Crear Cuenta</span>
          <span *ngIf="isLoading">Cargando...</span>
          <svg class="button-icon" *ngIf="!isLoading"><use href="#icon-arrow"></use></svg>
        </button>
        <a class="router-link" routerLink="/auth/login">¿Ya tienes cuenta? Inicia sesión</a>
        <div class="message-container">
          <p class="success-message" *ngIf="successMessage">{{ successMessage }}</p>
          <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>
        </div>
      </div>
    </form>
  </div>
</div>